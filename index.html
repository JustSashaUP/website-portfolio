<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="styles.css" type="text/css" rel="stylesheet" />
    <!--<link href="stars.css" type="text/css" rel="stylesheet" />-->
    <title>Alexandr Savchenko</title>
  </head>
  <body id="body-index">
    <div class="star-background">
      <div id="stars1"></div>
      <div id="stars2"></div>
    </div>
    <div>
      <nav>
        <div class="container-nav">
          <a href="index.html"
            ><img
              class="nav-logo-img"
              src="sources/images/logo.png"
              alt="Logo"
            />
          </a>
          <div class="nav-bar">
            <div class="nav-item"><a class="nav-link" href="#">Home</a></div>
            <div class="nav-item">
              <a class="nav-link" href="projects.html">Projects</a>
            </div>
            <div class="nav-item"><a class="nav-link" href="#">Resume</a></div>
          </div>
        </div>
      </nav>
    </div>
    <div class="container-border">
      <div>
        <h1 id="container-h1-intro">
          Hi
          <img
            src="sources/images/hand-waving.gif"
            alt="hand-waving"
            style="width: 70px"
          />, i'm Sasha<br />Java Software Engineer<br />
          from Ukraine üåç
        </h1>
      </div>
      <div id="model-container"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script>
      let scene, camera, renderer, mixer;

      function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(
          50,
          window.innerWidth / (window.innerHeight + 700),
          0.1,
          1000
        );
        camera.position.set(0.1, 1.2, 2);

        renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth / 2, window.innerHeight);
        renderer.setClearColor(0x000000, 0);
        document
          .getElementById("model-container")
          .appendChild(renderer.domElement);

        const hemisphereLight = new THREE.HemisphereLight(
          0xffffbb,
          0x080820,
          1
        );
        scene.add(hemisphereLight);

        const pointLightFace = new THREE.PointLight(0xffffff, 2, 100);
        pointLightFace.position.set(5, 5, 5);
        scene.add(pointLightFace);

        const pointLightClothing = new THREE.PointLight(0xffffff, 1.5, 100);
        pointLightClothing.position.set(0, -5, 0);
        scene.add(pointLightClothing);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.7);
        directionalLight.position.set(-5, 10, 10);
        scene.add(directionalLight);

        const loader = new THREE.GLTFLoader();
        loader.load(
          "sources/models/model_animation_idle.glb",
          function (gltf) {
            const model = gltf.scene;
            scene.add(model);

            mixer = new THREE.AnimationMixer(model);
            gltf.animations.forEach((clip) => {
              mixer.clipAction(clip).play();
            });

            animate();
          },
          undefined,
          function (error) {
            console.error(error);
          }
        );
      }

      function animate() {
        requestAnimationFrame(animate);

        const delta = clock.getDelta();
        if (mixer) mixer.update(delta);

        renderer.render(scene, camera);
      }

      const clock = new THREE.Clock();

      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / 2 / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth / 2, window.innerHeight);
      });

      init();
    </script>
  </body>
</html>
